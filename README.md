# AliyunDrive CLI（中文说明）

AliyunDrive CLI 是一个使用 Rust 编写的命令行工具，旨在通过终端与阿里云盘进行交互。它提供登录鉴权、目录导航、文件传输等常用能力，让偏好命令行的用户能够高效地管理云端文件。

## 功能特性

- **OAuth 登录**：通过浏览器扫码完成登录，并自动缓存 token。
- **远程文件浏览**：支持 `ls`、`cd`、`pwd` 等命令查看和切换云端目录。
- **高级列表选项**：`ls` 支持分页（`--marker`、`--all`）、数量限制（`--limit`）以及排序字段，完全对齐开放平台文档。
- **本地目录操作**：提供 `lls`、`lcd`、`lpwd` 等指令，便于在同一终端窗口中管理本地路径。
- **文件传输**：使用 `put` 上传、`get` 下载，支持在云端之间复制 (`cp`)、移动 (`mv`) 和删除 (`rm`) 文件。
- **远程搜索**：新增 `search` 指令，可在当前目录或全局范围内按名称模糊查找文件，支持分页与统计总数。
- **命令补全**：内置基于 rustyline 的补全器，能够根据当前远程目录给出提示。

## 环境要求

- Rust 1.74 或更高版本（建议使用最新稳定版）。
- 已安装 Cargo 构建工具。

## 快速开始

```bash
# 安装依赖并构建
cargo build --release

# 运行 CLI
cargo run
```

首次运行时可使用 `login` 命令，通过提示完成 OAuth 登录。之后即可使用各类命令管理云端文件。

## 常用命令

| 命令        | 说明                   |
|-------------|------------------------|
| `help`      | 查看帮助信息           |
| `login`     | 触发 OAuth 登录        |
| `ls`        | 列出当前远程目录内容   |
| `ls --all`  | 递归分页列出目录（自动翻页） |
| `cd <path>` | 切换远程目录           |
| `mkdir`     | 在远程创建文件夹       |
| `put`       | 上传本地文件到云端     |
| `get`       | 从云端下载文件到本地   |
| `rm`        | 删除云端文件或目录     |
| `search <keyword>` | 在云端搜索文件（支持 `--limit`、`--marker`、`--global`、`--return-total` 等选项） |
| `lls`       | 列出当前本地目录内容   |
| `lcd`       | 切换本地工作目录       |
| `lpwd`      | 显示当前本地目录       |

更多命令及参数可在运行程序后输入 `help` 或查看 `search` 命令提示获得详细说明。

## 开发与调试

- 使用 `cargo fmt` 格式化代码。
- 使用 `cargo clippy` 进行静态检查。
- 使用 `cargo test` 运行单元测试（如未来添加）。

欢迎通过 Issue 或 Pull Request 贡献代码与建议。

## 许可证

本项目基于 [MIT License](./LICENSE) 发布，详情见许可证文件。
